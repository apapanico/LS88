<!DOCTYPE html>
<html>
  <head><meta charset="utf-8" />
    
    <title></title><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

    

    <!-- Custom stylesheet, it must be in the same directory as the html file -->
    <link rel="stylesheet" href="../../../assets/css/notebook.css">

  <!-- Loading mathjax macro -->
    <!-- Load mathjax -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_HTML"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>
    <!-- End of mathjax configuration --></head>

    

    <body>
      <div tabindex="-1" id="notebook" class="border-box-sizing">
        <div class="container" id="notebook-container">
    
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Performance-Metrics-in-Basketball:-PER">Performance Metrics in Basketball: PER<a class="anchor-link" href="#Performance-Metrics-in-Basketball:-PER">&#182;</a></h1><hr>
<p><em>Co-Authored with Derek Topper</em></p>
<p>So far we have studied offensive metrics for baseball.  One thing we have seen is that a lot of metrics are built as linear sums of positive and negative contributions.  We will dissect PER (Player Efficiency Rating) in this notebook and observe how it works as a metric for player performance.</p>
<p>PER is a comprehensive metric that includes defensive statistics as well as offensive statistics.  While we have so far tried to segregate the two parts of play in baseball, we'll ignore that for now.</p>
<p>Basketball has a lot of moving parts and so the challenge is to figure out what the positive and negative contributions a player can make are and how to value them.</p>
<p>This notebook focuses on calculating Player Efficiency Rating given Raw NBA Player Data. PER looks like a complex, nasty equation but this notebook will break it down and show how simple and powerful it can be.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="http://www.mercurynews.com/wp-content/uploads/2017/02/sjm-stancalbkc-0218-01.jpg?w=620" style="width: 300px; height: 450px;" /></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Setup-and-Data">Setup and Data<a class="anchor-link" href="#Setup-and-Data">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">run</span> ../../utils/notebook_setup.py
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Adding datascience helper tools to path...
Setting up Matplotlib...
Matplotlib imported as mpl
Matplotlib.pyplot imported as plt
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="The-Data">The Data<a class="anchor-link" href="#The-Data">&#182;</a></h3><p>We'll be working the total stats of all players from the 2016-17 NBA season. The metrics contain each player's unique totals for statistics like Points, Assists, Rebounds, Blocks and Steals.</p>
<p>Here are the columns in the table below:</p>
<ul>
<li>Rk -- Rank</li>
<li>Pos -- Position</li>
<li>Age -- Age of Player at the start of February 1st of that season.</li>
<li>Tm -- Team</li>
<li>G -- Games</li>
<li>GS -- Games Started</li>
<li>MP -- Minutes Played</li>
<li>FG -- Field Goals</li>
<li>FGA -- Field Goal Attempts</li>
<li>FG% -- Field Goal Percentage</li>
<li>3P -- 3-Point Field Goals</li>
<li>3PA -- 3-Point Field Goal Attempts</li>
<li>3P% -- 3-Point Field Goal Percentage</li>
<li>2P -- 2-Point Field Goals</li>
<li>2PA -- 2-point Field Goal Attempts</li>
<li>2P% -- 2-Point Field Goal Percentage</li>
<li>eFG% -- Effective Field Goal Percentage</li>
<li>FT -- Free Throws</li>
<li>FTA -- Free Throw Attempts</li>
<li>FT% -- Free Throw Percentage</li>
<li>ORB -- Offensive Rebounds</li>
<li>DRB -- Defensive Rebounds</li>
<li>TRB -- Total Rebounds</li>
<li>AST -- Assists</li>
<li>STL -- Steals</li>
<li>BLK -- Blocks</li>
<li>TOV -- Turnovers</li>
<li>PF -- Personal Fouls</li>
<li>PTS -- Points</li>
</ul>
<p>Our data has some players appearing more than once. That is because that player was traded or moved teams in the middle of the season.</p>
<p><em>For example:</em> Quincy Acy played 38 games total (TOT). Of those, 32 games were played for the Brooklyn Nets (BRK) and 6 were played for the Dallas Mavericks (DAL)</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">player_stats</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;NBAPlayerStats2017.csv&#39;</span><span class="p">)</span>
<span class="n">player_stats</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[3]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Rk</th>
      <th>Player</th>
      <th>Pos</th>
      <th>Age</th>
      <th>Tm</th>
      <th>G</th>
      <th>GS</th>
      <th>MP</th>
      <th>FG</th>
      <th>FGA</th>
      <th>...</th>
      <th>FT%</th>
      <th>ORB</th>
      <th>DRB</th>
      <th>TRB</th>
      <th>AST</th>
      <th>STL</th>
      <th>BLK</th>
      <th>TOV</th>
      <th>PF</th>
      <th>PTS</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>Alex Abrines</td>
      <td>SG</td>
      <td>23</td>
      <td>OKC</td>
      <td>68</td>
      <td>6</td>
      <td>1055</td>
      <td>134</td>
      <td>341</td>
      <td>...</td>
      <td>0.898</td>
      <td>18</td>
      <td>68</td>
      <td>86</td>
      <td>40</td>
      <td>37</td>
      <td>8</td>
      <td>33</td>
      <td>114</td>
      <td>406</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>Quincy Acy</td>
      <td>PF</td>
      <td>26</td>
      <td>TOT</td>
      <td>38</td>
      <td>1</td>
      <td>558</td>
      <td>70</td>
      <td>170</td>
      <td>...</td>
      <td>0.750</td>
      <td>20</td>
      <td>95</td>
      <td>115</td>
      <td>18</td>
      <td>14</td>
      <td>15</td>
      <td>21</td>
      <td>67</td>
      <td>222</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>Quincy Acy</td>
      <td>PF</td>
      <td>26</td>
      <td>DAL</td>
      <td>6</td>
      <td>0</td>
      <td>48</td>
      <td>5</td>
      <td>17</td>
      <td>...</td>
      <td>0.667</td>
      <td>2</td>
      <td>6</td>
      <td>8</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>9</td>
      <td>13</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2</td>
      <td>Quincy Acy</td>
      <td>PF</td>
      <td>26</td>
      <td>BRK</td>
      <td>32</td>
      <td>1</td>
      <td>510</td>
      <td>65</td>
      <td>153</td>
      <td>...</td>
      <td>0.754</td>
      <td>18</td>
      <td>89</td>
      <td>107</td>
      <td>18</td>
      <td>14</td>
      <td>15</td>
      <td>19</td>
      <td>58</td>
      <td>209</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3</td>
      <td>Steven Adams</td>
      <td>C</td>
      <td>23</td>
      <td>OKC</td>
      <td>80</td>
      <td>80</td>
      <td>2389</td>
      <td>374</td>
      <td>655</td>
      <td>...</td>
      <td>0.611</td>
      <td>281</td>
      <td>332</td>
      <td>613</td>
      <td>86</td>
      <td>89</td>
      <td>78</td>
      <td>146</td>
      <td>195</td>
      <td>905</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 30 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Remove-TOT-entries">Remove TOT entries<a class="anchor-link" href="#Remove-TOT-entries">&#182;</a></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">player_stats</span> <span class="o">=</span> <span class="n">player_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;Tm&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;TOT&#39;</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="PER">PER<a class="anchor-link" href="#PER">&#182;</a></h2><p>John Hollinger was an NBA columnist for ESPN.com for eight years and is currently the Vice President of Basketball Operations for the Memphis Grizzlies. While at ESPN, he coined many advanced metrics in order to quantify player and team performance, such as Player Efficiency Rating (PER), Offensive Efficiency, Defensive Efficiency and Pace Factor.</p>
<p>PER is a rating of a player’s per-minute statistical performance that Hollinger developed to make player comparisons easier, and has become a widely used standard over the past decade. Hollinger has described PER as the sum of &lt;a href <a href="http://www.espn.com/nba/columns/story?columnist=hollinger_john&amp;id=2850240&gt;">http://www.espn.com/nba/columns/story?columnist=hollinger_john&amp;id=2850240&gt;</a> "all a player's positive accomplishments, subtracts the negative accomplishments, and returns a per-minute rating of a player's performance."&lt;/a&gt;</p>
<p>As PER attempts to be an all-encompassing number that looks at positive accomplishments, such as field goals, free throws, 3-pointers, assists, rebounds, blocks and steals, and negative results, such as missed shots, turnovers and fouls.</p>
<p>The formula adds positive stats and subtracts negative ones through a statistical point value system. The rating for each player is then adjusted to a per-minute basis so that no player is negatively impcted by lack of playing time. It is also adjusted for pace of play. In the end, PER serves as one number that attempts to create an overall player score.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="PER-Formula">PER Formula<a class="anchor-link" href="#PER-Formula">&#182;</a></h3><p>$$\ PER = \left ( uPER \times \frac{lgPace}{tmPace} \right ) \times \frac{15}{lguPER} $$</p>
<p>Where:</p>
<ul>
<li>''uPER'' stands for unadjusted PER</li>
<li>''tm'', the prefix, indicating of team rather than of player;</li>
<li>''lg'', the prefix, indicating of league rather than of player;</li>
<li>''Pace'' is related to the style of play of a team. We'll also get there later.</li>
</ul>
<p>The basic idea behind $uPER$ is the following:
\begin{align*}
uPER &amp; = \frac{1}{min} \times \Bigg(\Bigg.\\
     &amp; \quad\quad \text{Three Pointers Made} \\
     &amp; \quad\quad + \text{Contributions from Assists} \\
     &amp; \quad\quad + \text{Contributions from FGs} \\
     &amp; \quad\quad + \text{Contributions from FTs} \\
     &amp; \quad\quad - \text{Contributions from TOs} \\
     &amp; \quad\quad - \text{Contributions from Missed FGs} \\
     &amp; \quad\quad - \text{Contributions from Missed FTs} \\
     &amp; \quad\quad + \text{Contributions from Def Rebounds} \\
     &amp; \quad\quad + \text{Contributions from Off Rebounds} \\
     &amp; \quad\quad + \text{Contributions from Steals} \\
     &amp; \quad\quad + \text{Contributions from Blocks} \\
     &amp; \quad\quad - \text{Contributions from Fouls} \\
     &amp; \quad \Bigg.\Bigg)
\end{align*}</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="The-Components-of-$uPER$">The Components of $uPER$<a class="anchor-link" href="#The-Components-of-$uPER$">&#182;</a></h3><p>Let's do the computation for a specific player: Steph Curry</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">curry</span> <span class="o">=</span> <span class="n">player_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;Player&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Stephen Curry&#39;</span><span class="p">]</span>
<span class="n">curry</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[5]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Rk</th>
      <th>Player</th>
      <th>Pos</th>
      <th>Age</th>
      <th>Tm</th>
      <th>G</th>
      <th>GS</th>
      <th>MP</th>
      <th>FG</th>
      <th>FGA</th>
      <th>...</th>
      <th>FT%</th>
      <th>ORB</th>
      <th>DRB</th>
      <th>TRB</th>
      <th>AST</th>
      <th>STL</th>
      <th>BLK</th>
      <th>TOV</th>
      <th>PF</th>
      <th>PTS</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>120</th>
      <td>98</td>
      <td>Stephen Curry</td>
      <td>PG</td>
      <td>28</td>
      <td>GSW</td>
      <td>79</td>
      <td>79</td>
      <td>2638</td>
      <td>675</td>
      <td>1443</td>
      <td>...</td>
      <td>0.898</td>
      <td>61</td>
      <td>292</td>
      <td>353</td>
      <td>524</td>
      <td>142</td>
      <td>17</td>
      <td>239</td>
      <td>183</td>
      <td>1999</td>
    </tr>
  </tbody>
</table>
<p>1 rows × 30 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Three-Pointers">Three Pointers<a class="anchor-link" href="#Three-Pointers">&#182;</a></h4><p>Since three point shots are worth an extra point, we need to add in the extra point since it's not accounted for elsewhere.
$$
    \text{Three Pointers Made} = \mathit{3P}
$$</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">three_pt_contr</span> <span class="o">=</span> <span class="n">curry</span><span class="p">[</span><span class="s1">&#39;3P&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
<span class="n">three_pt_contr</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[6]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>324</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Assists">Assists<a class="anchor-link" href="#Assists">&#182;</a></h4><p>Assists were determined to have value of $2/3$: an assist directly leads to a bucket but you shouldn't get full credit for the bucket. You get two-thirds of a point from the field goal.</p>
<p>$$ \text{Contributions from Assists} = \frac23 \times AST$$</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">asts_contr</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">curry</span><span class="p">[</span><span class="s1">&#39;AST&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
<span class="n">asts_contr</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[7]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>349.3333333333333</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Field-Goals">Field Goals<a class="anchor-link" href="#Field-Goals">&#182;</a></h4><p>The FG might have been assisted.  If so, we need to discount the value of the FG to account for that.  We do that using a league average rate at which FGs actually have assists.  $\text{factor} \times \frac{tmAST}{tmFG}$ is meant to capture the expected number of FGs which were assisted with $\text{factor}$ driving that expected value.  This is a lot like some of the baseball calculations we've seen with stolen bases or GIDP.</p>
<p>$$
\text{Contributions from FGs} = \left ( 2 - \text{factor} \times \frac{tmAST}{tmFG} \right ) \times FG
$$
where 
$$
    \text{factor} = \frac{2}{3} - \left [ \left ( 0.5 \times \frac{lgAST}{lgFG} \right ) \div \left ( 2 \times \frac{lgFG}{lgFT} \right ) \right ]
$$</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Team values</span>
<span class="n">team</span> <span class="o">=</span> <span class="n">player_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;Tm&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;GSW&quot;</span><span class="p">]</span>
<span class="n">tmAST</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">team</span><span class="p">[</span><span class="s1">&#39;AST&#39;</span><span class="p">])</span>
<span class="n">tmFG</span> <span class="o">=</span> <span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">team</span><span class="p">[</span><span class="s1">&#39;FG&#39;</span><span class="p">]))</span>

<span class="c1"># League values</span>
<span class="n">lgAST</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;AST&#39;</span><span class="p">])</span>
<span class="n">lgFG</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;FG&#39;</span><span class="p">])</span>
<span class="n">lgFT</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;FT&#39;</span><span class="p">])</span>

<span class="c1"># Factor</span>
<span class="n">factor</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">lgAST</span> <span class="o">/</span> <span class="n">lgFG</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="n">lgFG</span> <span class="o">/</span> <span class="n">lgFT</span><span class="p">))</span>

<span class="c1"># FGs</span>
<span class="n">FG</span> <span class="o">=</span> <span class="n">curry</span><span class="p">[</span><span class="s1">&#39;FG&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>

<span class="n">fg_contr</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span> <span class="o">-</span> <span class="n">factor</span> <span class="o">*</span> <span class="n">tmAST</span> <span class="o">/</span> <span class="n">tmFG</span><span class="p">)</span> <span class="o">*</span> <span class="n">FG</span>
<span class="n">fg_contr</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[8]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>1064.1325273986868</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Free-Throws">Free Throws<a class="anchor-link" href="#Free-Throws">&#182;</a></h4><p>As with FGs, we need to discount FTs by the expected number of times they were assisted.
$$
    \text{Contributions from FTs} = 0.5 \times FT \times \left ( 2 -  \frac{1}{3} \times \frac{tmAST}{tmFG} \right )
$$</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">FT</span> <span class="o">=</span> <span class="n">curry</span><span class="p">[</span><span class="s1">&#39;FT&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
<span class="n">ft_contr</span> <span class="o">=</span> <span class="o">.</span><span class="mi">5</span> <span class="o">*</span> <span class="n">FT</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">-</span> <span class="n">tmAST</span> <span class="o">/</span> <span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">tmFG</span><span class="p">)</span> <span class="p">)</span>
<span class="n">ft_contr</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[9]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>286.79808418271045</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Turnovers">Turnovers<a class="anchor-link" href="#Turnovers">&#182;</a></h4><p>Turnovers prevent a chance at scoring so we need to dock the value of a possession from the player's rating.
$$
    \text{Contributions from TOs} = VOP \times TO
$$
where $VOP$ is the value of a possession and is equal to
$$
    VOP = \frac{lgPTS}{lgFGA - lgORB + lgTO + 0.44 \times lgFTA}
$$
The denominator is an approximation to the number of possessions.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">lgPTS</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;PTS&#39;</span><span class="p">])</span>
<span class="n">lgFGA</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;FGA&#39;</span><span class="p">])</span>
<span class="n">lgORB</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;ORB&#39;</span><span class="p">])</span>
<span class="n">lgTOV</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;TOV&#39;</span><span class="p">])</span>
<span class="n">lgFTA</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;FTA&#39;</span><span class="p">])</span>

<span class="n">vop</span> <span class="o">=</span> <span class="n">lgPTS</span> <span class="o">/</span> <span class="p">(</span><span class="n">lgFGA</span> <span class="o">-</span> <span class="n">lgORB</span> <span class="o">+</span> <span class="n">lgTOV</span> <span class="o">+</span> <span class="p">(</span><span class="o">.</span><span class="mi">44</span> <span class="o">*</span> <span class="n">lgFTA</span><span class="p">))</span>
<span class="n">vop</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[10]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>1.0685413540268014</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">TO</span> <span class="o">=</span> <span class="n">curry</span><span class="p">[</span><span class="s1">&#39;TOV&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
<span class="n">to_contr</span> <span class="o">=</span> <span class="n">TO</span> <span class="o">*</span> <span class="n">vop</span> 
<span class="n">to_contr</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[11]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>255.38138361240553</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="MIssed-FGs">MIssed FGs<a class="anchor-link" href="#MIssed-FGs">&#182;</a></h4><p>We need to dock the player for missed FGs that got rebounded by the defense.  A missed shot and no offensive rebound means a loss in the value of a possession.
$$
    \text{Contributions from Missed FGs} = VOP \times DRBP \times \left(FGA - FG \right) 
$$
where 
$$
    DRBP = \frac{lgTRB - lgORB}{lgTRB}
$$</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">lgTRB</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;TRB&#39;</span><span class="p">])</span>
<span class="n">lgORB</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;ORB&#39;</span><span class="p">])</span>
<span class="n">drbp</span> <span class="o">=</span> <span class="p">(</span><span class="n">lgTRB</span> <span class="o">-</span> <span class="n">lgORB</span><span class="p">)</span> <span class="o">/</span> <span class="n">lgTRB</span>
<span class="n">drbp</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[12]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>0.76704407451002377</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">FGA</span> <span class="o">=</span> <span class="n">curry</span><span class="p">[</span><span class="s1">&#39;FGA&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
<span class="n">missedfg_contr</span> <span class="o">=</span> <span class="n">vop</span> <span class="o">*</span> <span class="n">drbp</span> <span class="o">*</span> <span class="p">(</span><span class="n">FGA</span> <span class="o">-</span> <span class="n">FG</span><span class="p">)</span>
<span class="n">missedfg_contr</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[13]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>629.4668651329348</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Missed-FTs">Missed FTs<a class="anchor-link" href="#Missed-FTs">&#182;</a></h4><p>We need to account for how missed FTs that didn't get rebounded by the offense led to a diminished value of the possession (not a full loss like a missed FG).  The arithmetic to account for this is given by,
$$
    \text{Contributions from Missed FTs} = VOP \times 0.44 \times \left(0.44 + 0.56 \times DRBP \right)
         \times \left(FTA - FT \right) 
$$</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">FTA</span> <span class="o">=</span> <span class="n">curry</span><span class="p">[</span><span class="s1">&#39;FTA&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
<span class="n">missedft_contr</span> <span class="o">=</span> <span class="n">vop</span> <span class="o">*</span> <span class="o">.</span><span class="mi">44</span> <span class="o">*</span> <span class="p">(</span><span class="o">.</span><span class="mi">44</span> <span class="o">+</span> <span class="o">.</span><span class="mi">56</span> <span class="o">*</span> <span class="n">drbp</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">FTA</span> <span class="o">-</span> <span class="n">FT</span><span class="p">)</span>
<span class="n">missedft_contr</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[14]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>15.126471672013666</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Defensive-Rebounds">Defensive Rebounds<a class="anchor-link" href="#Defensive-Rebounds">&#182;</a></h4><p>Since you are gaining a possession for your team, you should be rewarded for your rebounds but at the rate at which the team offensive rebound.</p>
<p>$$
    \text{Contributions from Def Rebounds} = VOP \times \left(1 - DRBP \right) \times \left(TRB - ORB \right)
$$</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">TRB</span> <span class="o">=</span> <span class="n">curry</span><span class="p">[</span><span class="s1">&#39;TRB&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
<span class="n">ORB</span> <span class="o">=</span> <span class="n">curry</span><span class="p">[</span><span class="s1">&#39;ORB&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
<span class="n">drb_contr</span> <span class="o">=</span> <span class="n">vop</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">drbp</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">TRB</span> <span class="o">-</span> <span class="n">ORB</span><span class="p">)</span>
<span class="n">drb_contr</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[15]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>72.685527695074754</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Offensive-Rebounds">Offensive Rebounds<a class="anchor-link" href="#Offensive-Rebounds">&#182;</a></h4><p>Offensive rebounds lead to an extended possession so this should be rewarded but discounted by how often teams give up offensive rebounds.
$$
    \text{Contributions from Off Rebounds} = VOP \times DRBP \times ORB 
$$</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">orb_contr</span> <span class="o">=</span> <span class="n">vop</span> <span class="o">*</span> <span class="n">drbp</span> <span class="o">*</span> <span class="n">ORB</span>
<span class="n">orb_contr</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[16]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>49.996717152485708</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Steals">Steals<a class="anchor-link" href="#Steals">&#182;</a></h4><p>Steals lead to a possession for the team so reward with $VOP$
$$
\text{Contributions from Steals} = VOP \times STL
$$</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">STL</span> <span class="o">=</span> <span class="n">curry</span><span class="p">[</span><span class="s1">&#39;STL&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
<span class="n">stl_contr</span> <span class="o">=</span> <span class="n">vop</span> <span class="o">*</span> <span class="n">STL</span>
<span class="n">stl_contr</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[17]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>151.7328722718058</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Blocks">Blocks<a class="anchor-link" href="#Blocks">&#182;</a></h4><p>Blocks are rewarded for gaining a possession at the rate at which they are rebounded.
$$
    \text{Contributions from Blocks} = VOP \times DRBP \times BLK 
$$</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">BLK</span> <span class="o">=</span> <span class="n">curry</span><span class="p">[</span><span class="s1">&#39;BLK&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
<span class="n">blk_contr</span> <span class="o">=</span> <span class="n">vop</span> <span class="o">*</span> <span class="n">drbp</span> <span class="o">*</span> <span class="n">BLK</span>
<span class="n">blk_contr</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[18]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>13.933511337577983</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Fouls">Fouls<a class="anchor-link" href="#Fouls">&#182;</a></h4><p>Fouls lead to opposing points so you should be docked for giving up points.  You should only be docked for giving points above the expected value for those possessions.</p>
<p>\begin{align*}
    \text{Contributions from Fouls} &amp; = \text{Total points from commmited fouls} - \text{Points expected on those possessions} \\
    &amp; = 
    PF \times \frac{lgFT}{lgPF} - PF \times 0.44 \times \frac{lgFTA}{lgPF} \times VOP
\end{align*}</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">lgPF</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;PF&#39;</span><span class="p">])</span>

<span class="n">PF</span> <span class="o">=</span> <span class="n">curry</span><span class="p">[</span><span class="s1">&#39;PF&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
<span class="n">foul_contr</span> <span class="o">=</span> <span class="n">PF</span> <span class="o">*</span> <span class="n">lgFT</span> <span class="o">/</span> <span class="n">lgPF</span> <span class="o">-</span> <span class="n">PF</span> <span class="o">*</span> <span class="o">.</span><span class="mi">44</span> <span class="o">*</span> <span class="n">lgFTA</span> <span class="o">/</span> <span class="n">lgPF</span> <span class="o">*</span> <span class="n">vop</span>
<span class="n">foul_contr</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[19]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>64.123483301925148</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Curry's-$uPER$">Curry's $uPER$<a class="anchor-link" href="#Curry's-$uPER$">&#182;</a></h4><p>We put together all the contributions and we get $uPER$.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">MP</span> <span class="o">=</span> <span class="n">curry</span><span class="p">[</span><span class="s1">&#39;MP&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
<span class="n">curry_uper</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">three_pt_contr</span> <span class="o">+</span> <span class="n">asts_contr</span> <span class="o">+</span> <span class="n">fg_contr</span> <span class="o">+</span> <span class="n">ft_contr</span>
    <span class="o">-</span> <span class="n">to_contr</span> <span class="o">-</span> <span class="n">missedfg_contr</span> <span class="o">-</span> <span class="n">missedft_contr</span>
    <span class="o">+</span> <span class="n">drb_contr</span> <span class="o">+</span> <span class="n">orb_contr</span> <span class="o">+</span> <span class="n">stl_contr</span> <span class="o">+</span> <span class="n">blk_contr</span>
    <span class="o">-</span> <span class="n">foul_contr</span>
<span class="p">)</span> <span class="o">/</span> <span class="n">MP</span>
<span class="n">curry_uper</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[20]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>0.51118816135420608</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Computing-PER">Computing PER<a class="anchor-link" href="#Computing-PER">&#182;</a></h3><p>Recall the formula
$$\ PER = \left ( uPER \times \frac{lgPace}{tmPace} \right ) \times \frac{15}{lguPER} $$
where we now have $uPER$ for Steph Curry.</p>
<h4 id="$lguPER$">$lguPER$<a class="anchor-link" href="#$lguPER$">&#182;</a></h4><p>We need to compute $uPER$ for every player.  We take the previous code and put it into a function to compute for every player.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">uPER</span><span class="p">(</span><span class="n">player_name</span><span class="p">,</span> <span class="n">player_stats</span><span class="p">):</span>
    <span class="n">player</span> <span class="o">=</span> <span class="n">player_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;Player&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">player_name</span><span class="p">]</span>
    
    <span class="c1"># Team values</span>
    <span class="k">if</span> <span class="n">player</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">team</span> <span class="o">=</span> <span class="n">player_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;Tm&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">player</span><span class="p">[</span><span class="s1">&#39;Tm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">item</span><span class="p">()]</span>
        <span class="n">tmAST</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">team</span><span class="p">[</span><span class="s1">&#39;AST&#39;</span><span class="p">])</span>
        <span class="n">tmFG</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">team</span><span class="p">[</span><span class="s1">&#39;FG&#39;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">tmAST</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">tmFG</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">mp_tot</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">mp</span><span class="p">,</span> <span class="n">tm</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">player</span><span class="p">[</span><span class="s1">&#39;MP&#39;</span><span class="p">],</span> <span class="n">player</span><span class="p">[</span><span class="s1">&#39;Tm&#39;</span><span class="p">]):</span>
            <span class="n">team</span> <span class="o">=</span> <span class="n">player_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;Tm&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">tm</span><span class="p">]</span>
            <span class="n">tmAST</span> <span class="o">+=</span> <span class="n">mp</span> <span class="o">*</span> <span class="nb">sum</span><span class="p">(</span><span class="n">team</span><span class="p">[</span><span class="s1">&#39;AST&#39;</span><span class="p">])</span>
            <span class="n">tmFG</span> <span class="o">+=</span> <span class="n">mp</span> <span class="o">*</span> <span class="nb">sum</span><span class="p">(</span><span class="n">team</span><span class="p">[</span><span class="s1">&#39;FG&#39;</span><span class="p">])</span>
            <span class="n">mp_tot</span> <span class="o">+=</span> <span class="n">mp</span>
        <span class="n">tmFG</span> <span class="o">/=</span><span class="n">mp_tot</span>
        <span class="n">tmAST</span> <span class="o">/=</span> <span class="n">mp_tot</span>
    
    <span class="c1"># League values</span>
    <span class="n">lgPTS</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;PTS&#39;</span><span class="p">])</span>
    <span class="n">lgFG</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;FG&#39;</span><span class="p">])</span>
    <span class="n">lgFGA</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;FGA&#39;</span><span class="p">])</span>
    <span class="n">lgAST</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;AST&#39;</span><span class="p">])</span>
    <span class="n">lgFT</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;FT&#39;</span><span class="p">])</span>
    <span class="n">lgFTA</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;FTA&#39;</span><span class="p">])</span>
    <span class="n">lgTRB</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;TRB&#39;</span><span class="p">])</span>
    <span class="n">lgORB</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;ORB&#39;</span><span class="p">])</span>
    <span class="n">lgTOV</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;TOV&#39;</span><span class="p">])</span>
    <span class="n">lgPF</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;PF&#39;</span><span class="p">])</span>

    <span class="c1"># Values</span>
    <span class="n">factor</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">lgAST</span> <span class="o">/</span> <span class="n">lgFG</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="n">lgFG</span> <span class="o">/</span> <span class="n">lgFT</span><span class="p">))</span>
    <span class="n">vop</span> <span class="o">=</span> <span class="n">lgPTS</span> <span class="o">/</span> <span class="p">(</span><span class="n">lgFGA</span> <span class="o">-</span> <span class="n">lgORB</span> <span class="o">+</span> <span class="n">lgTOV</span> <span class="o">+</span> <span class="p">(</span><span class="o">.</span><span class="mi">44</span> <span class="o">*</span> <span class="n">lgFTA</span><span class="p">))</span>
    <span class="n">drbp</span> <span class="o">=</span> <span class="p">(</span><span class="n">lgTRB</span> <span class="o">-</span> <span class="n">lgORB</span><span class="p">)</span> <span class="o">/</span> <span class="n">lgTRB</span>

    <span class="c1"># Stats</span>
    <span class="n">MP</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player</span><span class="p">[</span><span class="s1">&#39;MP&#39;</span><span class="p">])</span>
    <span class="n">FG3</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player</span><span class="p">[</span><span class="s1">&#39;3P&#39;</span><span class="p">])</span>
    <span class="n">FG</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player</span><span class="p">[</span><span class="s1">&#39;FG&#39;</span><span class="p">])</span>
    <span class="n">FGA</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player</span><span class="p">[</span><span class="s1">&#39;FGA&#39;</span><span class="p">])</span>
    <span class="n">AST</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player</span><span class="p">[</span><span class="s1">&#39;AST&#39;</span><span class="p">])</span>
    <span class="n">FT</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player</span><span class="p">[</span><span class="s1">&#39;FT&#39;</span><span class="p">])</span>
    <span class="n">FTA</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player</span><span class="p">[</span><span class="s1">&#39;FTA&#39;</span><span class="p">])</span>
    <span class="n">TRB</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player</span><span class="p">[</span><span class="s1">&#39;TRB&#39;</span><span class="p">])</span>
    <span class="n">ORB</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player</span><span class="p">[</span><span class="s1">&#39;ORB&#39;</span><span class="p">])</span>
    <span class="n">STL</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player</span><span class="p">[</span><span class="s1">&#39;STL&#39;</span><span class="p">])</span>
    <span class="n">TO</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player</span><span class="p">[</span><span class="s1">&#39;TOV&#39;</span><span class="p">])</span>
    <span class="n">BLK</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player</span><span class="p">[</span><span class="s1">&#39;BLK&#39;</span><span class="p">])</span>
    <span class="n">PF</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">player</span><span class="p">[</span><span class="s1">&#39;PF&#39;</span><span class="p">])</span>

    <span class="c1"># Contributions</span>
    <span class="n">three_pt_contr</span> <span class="o">=</span> <span class="n">FG3</span>
    <span class="n">asts_contr</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">AST</span>
    <span class="n">fg_contr</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span> <span class="o">-</span> <span class="n">factor</span> <span class="o">*</span> <span class="n">tmAST</span> <span class="o">/</span> <span class="n">tmFG</span><span class="p">)</span> <span class="o">*</span> <span class="n">FG</span>
    <span class="n">ft_contr</span> <span class="o">=</span> <span class="o">.</span><span class="mi">5</span> <span class="o">*</span> <span class="n">FT</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">-</span> <span class="n">tmAST</span> <span class="o">/</span> <span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">tmFG</span><span class="p">))</span>
    <span class="n">to_contr</span> <span class="o">=</span> <span class="n">TO</span> <span class="o">*</span> <span class="n">vop</span> 
    <span class="n">missedfg_contr</span> <span class="o">=</span> <span class="n">vop</span> <span class="o">*</span> <span class="n">drbp</span> <span class="o">*</span> <span class="p">(</span><span class="n">FGA</span> <span class="o">-</span> <span class="n">FG</span><span class="p">)</span>
    <span class="n">missedft_contr</span> <span class="o">=</span> <span class="n">vop</span> <span class="o">*</span> <span class="o">.</span><span class="mi">44</span> <span class="o">*</span> <span class="p">(</span><span class="o">.</span><span class="mi">44</span> <span class="o">+</span> <span class="o">.</span><span class="mi">56</span> <span class="o">*</span> <span class="n">drbp</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">FTA</span> <span class="o">-</span> <span class="n">FT</span><span class="p">)</span>
    <span class="n">drb_contr</span> <span class="o">=</span> <span class="n">vop</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">drbp</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">TRB</span> <span class="o">-</span> <span class="n">ORB</span><span class="p">)</span>
    <span class="n">orb_contr</span> <span class="o">=</span> <span class="n">vop</span> <span class="o">*</span> <span class="n">drbp</span> <span class="o">*</span> <span class="n">ORB</span>
    <span class="n">stl_contr</span> <span class="o">=</span> <span class="n">vop</span> <span class="o">*</span> <span class="n">STL</span>
    <span class="n">blk_contr</span> <span class="o">=</span> <span class="n">vop</span> <span class="o">*</span> <span class="n">drbp</span> <span class="o">*</span> <span class="n">BLK</span>
    <span class="n">foul_contr</span> <span class="o">=</span> <span class="n">PF</span> <span class="o">*</span> <span class="n">lgFT</span> <span class="o">/</span> <span class="n">lgPF</span> <span class="o">-</span> <span class="n">PF</span> <span class="o">*</span> <span class="o">.</span><span class="mi">44</span> <span class="o">*</span> <span class="n">lgFTA</span> <span class="o">/</span> <span class="n">lgPF</span> <span class="o">*</span> <span class="n">vop</span>

    <span class="n">player_uper</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">three_pt_contr</span> <span class="o">+</span> <span class="n">asts_contr</span> <span class="o">+</span> <span class="n">fg_contr</span> <span class="o">+</span> <span class="n">ft_contr</span>
        <span class="o">-</span> <span class="n">to_contr</span> <span class="o">-</span> <span class="n">missedfg_contr</span> <span class="o">-</span> <span class="n">missedft_contr</span>
        <span class="o">+</span> <span class="n">drb_contr</span> <span class="o">+</span> <span class="n">orb_contr</span> <span class="o">+</span> <span class="n">stl_contr</span> <span class="o">+</span> <span class="n">blk_contr</span>
        <span class="o">-</span> <span class="n">foul_contr</span>
    <span class="p">)</span> <span class="o">/</span> <span class="n">MP</span>
    <span class="k">return</span> <span class="n">player_uper</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># verify</span>
<span class="n">uPER</span><span class="p">(</span><span class="s1">&#39;Stephen Curry&#39;</span><span class="p">,</span> <span class="n">player_stats</span><span class="p">),</span> <span class="n">uPER</span><span class="p">(</span><span class="s1">&#39;Stephen Curry&#39;</span><span class="p">,</span> <span class="n">player_stats</span><span class="p">)</span> <span class="o">==</span> <span class="n">curry_uper</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[22]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(0.51118816135420608, True)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Compute-$uPER$-for-each-player">Compute $uPER$ for each player<a class="anchor-link" href="#Compute-$uPER$-for-each-player">&#182;</a></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">players</span> <span class="o">=</span> <span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;Player&#39;</span><span class="p">]</span>
<span class="n">uper</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">uPER</span><span class="p">(</span><span class="n">player</span><span class="p">,</span> <span class="n">player_stats</span><span class="p">)</span> <span class="k">for</span> <span class="n">player</span> <span class="ow">in</span> <span class="n">players</span><span class="p">])</span>

<span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;uPER&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">uper</span>
<span class="n">player_stats</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[23]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Rk</th>
      <th>Player</th>
      <th>Pos</th>
      <th>Age</th>
      <th>Tm</th>
      <th>G</th>
      <th>GS</th>
      <th>MP</th>
      <th>FG</th>
      <th>FGA</th>
      <th>...</th>
      <th>ORB</th>
      <th>DRB</th>
      <th>TRB</th>
      <th>AST</th>
      <th>STL</th>
      <th>BLK</th>
      <th>TOV</th>
      <th>PF</th>
      <th>PTS</th>
      <th>uPER</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>Alex Abrines</td>
      <td>SG</td>
      <td>23</td>
      <td>OKC</td>
      <td>68</td>
      <td>6</td>
      <td>1055</td>
      <td>134</td>
      <td>341</td>
      <td>...</td>
      <td>18</td>
      <td>68</td>
      <td>86</td>
      <td>40</td>
      <td>37</td>
      <td>8</td>
      <td>33</td>
      <td>114</td>
      <td>406</td>
      <td>0.205542</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>Quincy Acy</td>
      <td>PF</td>
      <td>26</td>
      <td>DAL</td>
      <td>6</td>
      <td>0</td>
      <td>48</td>
      <td>5</td>
      <td>17</td>
      <td>...</td>
      <td>2</td>
      <td>6</td>
      <td>8</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>9</td>
      <td>13</td>
      <td>0.249477</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2</td>
      <td>Quincy Acy</td>
      <td>PF</td>
      <td>26</td>
      <td>BRK</td>
      <td>32</td>
      <td>1</td>
      <td>510</td>
      <td>65</td>
      <td>153</td>
      <td>...</td>
      <td>18</td>
      <td>89</td>
      <td>107</td>
      <td>18</td>
      <td>14</td>
      <td>15</td>
      <td>19</td>
      <td>58</td>
      <td>209</td>
      <td>0.249477</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3</td>
      <td>Steven Adams</td>
      <td>C</td>
      <td>23</td>
      <td>OKC</td>
      <td>80</td>
      <td>80</td>
      <td>2389</td>
      <td>374</td>
      <td>655</td>
      <td>...</td>
      <td>281</td>
      <td>332</td>
      <td>613</td>
      <td>86</td>
      <td>89</td>
      <td>78</td>
      <td>146</td>
      <td>195</td>
      <td>905</td>
      <td>0.337159</td>
    </tr>
    <tr>
      <th>5</th>
      <td>4</td>
      <td>Arron Afflalo</td>
      <td>SG</td>
      <td>31</td>
      <td>SAC</td>
      <td>61</td>
      <td>45</td>
      <td>1580</td>
      <td>185</td>
      <td>420</td>
      <td>...</td>
      <td>9</td>
      <td>116</td>
      <td>125</td>
      <td>78</td>
      <td>21</td>
      <td>6</td>
      <td>42</td>
      <td>104</td>
      <td>515</td>
      <td>0.176202</td>
    </tr>
    <tr>
      <th>6</th>
      <td>5</td>
      <td>Alexis Ajinca</td>
      <td>C</td>
      <td>28</td>
      <td>NOP</td>
      <td>39</td>
      <td>15</td>
      <td>584</td>
      <td>89</td>
      <td>178</td>
      <td>...</td>
      <td>46</td>
      <td>131</td>
      <td>177</td>
      <td>12</td>
      <td>20</td>
      <td>22</td>
      <td>31</td>
      <td>77</td>
      <td>207</td>
      <td>0.262386</td>
    </tr>
    <tr>
      <th>7</th>
      <td>6</td>
      <td>Cole Aldrich</td>
      <td>C</td>
      <td>28</td>
      <td>MIN</td>
      <td>62</td>
      <td>0</td>
      <td>531</td>
      <td>45</td>
      <td>86</td>
      <td>...</td>
      <td>51</td>
      <td>107</td>
      <td>158</td>
      <td>25</td>
      <td>25</td>
      <td>23</td>
      <td>17</td>
      <td>85</td>
      <td>105</td>
      <td>0.251501</td>
    </tr>
    <tr>
      <th>8</th>
      <td>7</td>
      <td>LaMarcus Aldridge</td>
      <td>PF</td>
      <td>31</td>
      <td>SAS</td>
      <td>72</td>
      <td>72</td>
      <td>2335</td>
      <td>500</td>
      <td>1049</td>
      <td>...</td>
      <td>172</td>
      <td>351</td>
      <td>523</td>
      <td>139</td>
      <td>46</td>
      <td>88</td>
      <td>98</td>
      <td>158</td>
      <td>1243</td>
      <td>0.364055</td>
    </tr>
    <tr>
      <th>9</th>
      <td>8</td>
      <td>Lavoy Allen</td>
      <td>PF</td>
      <td>27</td>
      <td>IND</td>
      <td>61</td>
      <td>5</td>
      <td>871</td>
      <td>77</td>
      <td>168</td>
      <td>...</td>
      <td>105</td>
      <td>114</td>
      <td>219</td>
      <td>57</td>
      <td>18</td>
      <td>24</td>
      <td>29</td>
      <td>78</td>
      <td>177</td>
      <td>0.232702</td>
    </tr>
    <tr>
      <th>10</th>
      <td>9</td>
      <td>Tony Allen</td>
      <td>SG</td>
      <td>35</td>
      <td>MEM</td>
      <td>71</td>
      <td>66</td>
      <td>1914</td>
      <td>274</td>
      <td>595</td>
      <td>...</td>
      <td>166</td>
      <td>225</td>
      <td>391</td>
      <td>98</td>
      <td>115</td>
      <td>29</td>
      <td>100</td>
      <td>178</td>
      <td>643</td>
      <td>0.256180</td>
    </tr>
    <tr>
      <th>11</th>
      <td>10</td>
      <td>Al-Farouq Aminu</td>
      <td>SF</td>
      <td>26</td>
      <td>POR</td>
      <td>61</td>
      <td>25</td>
      <td>1773</td>
      <td>183</td>
      <td>466</td>
      <td>...</td>
      <td>77</td>
      <td>374</td>
      <td>451</td>
      <td>99</td>
      <td>60</td>
      <td>44</td>
      <td>94</td>
      <td>102</td>
      <td>532</td>
      <td>0.227085</td>
    </tr>
    <tr>
      <th>12</th>
      <td>11</td>
      <td>Chris Andersen</td>
      <td>C</td>
      <td>38</td>
      <td>CLE</td>
      <td>12</td>
      <td>0</td>
      <td>114</td>
      <td>9</td>
      <td>22</td>
      <td>...</td>
      <td>9</td>
      <td>22</td>
      <td>31</td>
      <td>5</td>
      <td>5</td>
      <td>7</td>
      <td>5</td>
      <td>20</td>
      <td>28</td>
      <td>0.233452</td>
    </tr>
    <tr>
      <th>13</th>
      <td>12</td>
      <td>Alan Anderson</td>
      <td>SF</td>
      <td>34</td>
      <td>LAC</td>
      <td>30</td>
      <td>0</td>
      <td>308</td>
      <td>30</td>
      <td>80</td>
      <td>...</td>
      <td>3</td>
      <td>21</td>
      <td>24</td>
      <td>11</td>
      <td>3</td>
      <td>0</td>
      <td>7</td>
      <td>35</td>
      <td>86</td>
      <td>0.098884</td>
    </tr>
    <tr>
      <th>15</th>
      <td>13</td>
      <td>Justin Anderson</td>
      <td>SF</td>
      <td>23</td>
      <td>DAL</td>
      <td>51</td>
      <td>2</td>
      <td>710</td>
      <td>111</td>
      <td>277</td>
      <td>...</td>
      <td>39</td>
      <td>110</td>
      <td>149</td>
      <td>32</td>
      <td>28</td>
      <td>16</td>
      <td>40</td>
      <td>64</td>
      <td>329</td>
      <td>0.272663</td>
    </tr>
    <tr>
      <th>16</th>
      <td>13</td>
      <td>Justin Anderson</td>
      <td>SF</td>
      <td>23</td>
      <td>PHI</td>
      <td>24</td>
      <td>8</td>
      <td>518</td>
      <td>75</td>
      <td>162</td>
      <td>...</td>
      <td>30</td>
      <td>66</td>
      <td>96</td>
      <td>34</td>
      <td>13</td>
      <td>7</td>
      <td>26</td>
      <td>45</td>
      <td>203</td>
      <td>0.272663</td>
    </tr>
    <tr>
      <th>17</th>
      <td>14</td>
      <td>Kyle Anderson</td>
      <td>SG</td>
      <td>23</td>
      <td>SAS</td>
      <td>72</td>
      <td>14</td>
      <td>1020</td>
      <td>93</td>
      <td>209</td>
      <td>...</td>
      <td>33</td>
      <td>175</td>
      <td>208</td>
      <td>91</td>
      <td>51</td>
      <td>26</td>
      <td>39</td>
      <td>63</td>
      <td>246</td>
      <td>0.246015</td>
    </tr>
    <tr>
      <th>18</th>
      <td>15</td>
      <td>Ryan Anderson</td>
      <td>PF</td>
      <td>28</td>
      <td>HOU</td>
      <td>72</td>
      <td>72</td>
      <td>2116</td>
      <td>323</td>
      <td>773</td>
      <td>...</td>
      <td>112</td>
      <td>218</td>
      <td>330</td>
      <td>68</td>
      <td>31</td>
      <td>14</td>
      <td>55</td>
      <td>142</td>
      <td>979</td>
      <td>0.280769</td>
    </tr>
    <tr>
      <th>19</th>
      <td>16</td>
      <td>Giannis Antetokounmpo</td>
      <td>SF</td>
      <td>22</td>
      <td>MIL</td>
      <td>80</td>
      <td>80</td>
      <td>2845</td>
      <td>656</td>
      <td>1259</td>
      <td>...</td>
      <td>142</td>
      <td>558</td>
      <td>700</td>
      <td>434</td>
      <td>131</td>
      <td>151</td>
      <td>234</td>
      <td>246</td>
      <td>1832</td>
      <td>0.512369</td>
    </tr>
    <tr>
      <th>20</th>
      <td>17</td>
      <td>Carmelo Anthony</td>
      <td>SF</td>
      <td>32</td>
      <td>NYK</td>
      <td>74</td>
      <td>74</td>
      <td>2538</td>
      <td>602</td>
      <td>1389</td>
      <td>...</td>
      <td>62</td>
      <td>376</td>
      <td>438</td>
      <td>213</td>
      <td>60</td>
      <td>34</td>
      <td>153</td>
      <td>198</td>
      <td>1659</td>
      <td>0.357615</td>
    </tr>
    <tr>
      <th>21</th>
      <td>18</td>
      <td>Joel Anthony</td>
      <td>C</td>
      <td>34</td>
      <td>SAS</td>
      <td>19</td>
      <td>0</td>
      <td>122</td>
      <td>10</td>
      <td>16</td>
      <td>...</td>
      <td>8</td>
      <td>23</td>
      <td>31</td>
      <td>3</td>
      <td>2</td>
      <td>6</td>
      <td>4</td>
      <td>11</td>
      <td>25</td>
      <td>0.228829</td>
    </tr>
  </tbody>
</table>
<p>20 rows × 31 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Team-and-League-Pace">Team and League Pace<a class="anchor-link" href="#Team-and-League-Pace">&#182;</a></h4><p>Team pace is stored in a separate file.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pace</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;Pace.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="s1">&#39;Team&#39;</span><span class="p">,</span> <span class="n">squeeze</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">pace</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[24]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>Team
BRK               101.3
PHO               100.3
HOU               100.0
GSW                99.8
PHI                98.5
LAL                98.5
DEN                98.3
NOP                98.0
OKC                97.8
WAS                97.4
ATL                97.4
BOS                96.8
ORL                96.8
POR                96.7
League Average     96.4
CLE                96.2
LAC                96.1
NYK                96.0
IND                95.9
CHO                95.7
CHI                95.3
MIA                95.2
DET                95.0
SAC                94.9
TOR                94.7
MIN                94.6
MIL                94.5
SAS                94.2
MEM                92.3
DAL                92.2
UTA                91.6
Name: Pace, dtype: float64</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[25]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">lgPace</span> <span class="o">=</span> <span class="n">pace</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;League Average&#39;</span><span class="p">]</span>
<span class="n">lgPace</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[25]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>96.400000000000006</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[26]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">player_pace</span><span class="p">(</span><span class="n">player_name</span><span class="p">,</span> <span class="n">player_stats</span><span class="p">,</span> <span class="n">pace</span><span class="p">):</span>
    <span class="n">player</span> <span class="o">=</span> <span class="n">player_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;Player&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">player_name</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">player</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">player_pace</span> <span class="o">=</span> <span class="n">pace</span><span class="p">[</span><span class="n">player</span><span class="p">[</span><span class="s1">&#39;Tm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">item</span><span class="p">()]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">player_pace</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">mp_tot</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">mp</span><span class="p">,</span> <span class="n">tm</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">player</span><span class="p">[</span><span class="s1">&#39;MP&#39;</span><span class="p">],</span> <span class="n">player</span><span class="p">[</span><span class="s1">&#39;Tm&#39;</span><span class="p">]):</span>
            <span class="n">player_pace</span> <span class="o">+=</span> <span class="n">mp</span> <span class="o">*</span> <span class="n">pace</span><span class="p">[</span><span class="n">tm</span><span class="p">]</span>
            <span class="n">mp_tot</span> <span class="o">+=</span> <span class="n">mp</span>
        <span class="n">player_pace</span> <span class="o">/=</span> <span class="n">mp_tot</span>
    <span class="k">return</span> <span class="n">player_pace</span>


<span class="n">players</span> <span class="o">=</span> <span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;Player&#39;</span><span class="p">]</span>
<span class="n">player_pace</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">player_pace</span><span class="p">(</span><span class="n">player</span><span class="p">,</span> <span class="n">player_stats</span><span class="p">,</span> <span class="n">pace</span><span class="p">)</span> <span class="k">for</span> <span class="n">player</span> <span class="ow">in</span> <span class="n">players</span><span class="p">])</span>
<span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;Pace&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">player_pace</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[27]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;Pace Factor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lgPace</span> <span class="o">/</span> <span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;Pace&#39;</span><span class="p">]</span>
<span class="n">player_stats</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[27]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Rk</th>
      <th>Player</th>
      <th>Pos</th>
      <th>Age</th>
      <th>Tm</th>
      <th>G</th>
      <th>GS</th>
      <th>MP</th>
      <th>FG</th>
      <th>FGA</th>
      <th>...</th>
      <th>TRB</th>
      <th>AST</th>
      <th>STL</th>
      <th>BLK</th>
      <th>TOV</th>
      <th>PF</th>
      <th>PTS</th>
      <th>uPER</th>
      <th>Pace</th>
      <th>Pace Factor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>Alex Abrines</td>
      <td>SG</td>
      <td>23</td>
      <td>OKC</td>
      <td>68</td>
      <td>6</td>
      <td>1055</td>
      <td>134</td>
      <td>341</td>
      <td>...</td>
      <td>86</td>
      <td>40</td>
      <td>37</td>
      <td>8</td>
      <td>33</td>
      <td>114</td>
      <td>406</td>
      <td>0.205542</td>
      <td>97.800000</td>
      <td>0.985685</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>Quincy Acy</td>
      <td>PF</td>
      <td>26</td>
      <td>DAL</td>
      <td>6</td>
      <td>0</td>
      <td>48</td>
      <td>5</td>
      <td>17</td>
      <td>...</td>
      <td>8</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>9</td>
      <td>13</td>
      <td>0.249477</td>
      <td>100.517204</td>
      <td>0.959040</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2</td>
      <td>Quincy Acy</td>
      <td>PF</td>
      <td>26</td>
      <td>BRK</td>
      <td>32</td>
      <td>1</td>
      <td>510</td>
      <td>65</td>
      <td>153</td>
      <td>...</td>
      <td>107</td>
      <td>18</td>
      <td>14</td>
      <td>15</td>
      <td>19</td>
      <td>58</td>
      <td>209</td>
      <td>0.249477</td>
      <td>100.517204</td>
      <td>0.959040</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3</td>
      <td>Steven Adams</td>
      <td>C</td>
      <td>23</td>
      <td>OKC</td>
      <td>80</td>
      <td>80</td>
      <td>2389</td>
      <td>374</td>
      <td>655</td>
      <td>...</td>
      <td>613</td>
      <td>86</td>
      <td>89</td>
      <td>78</td>
      <td>146</td>
      <td>195</td>
      <td>905</td>
      <td>0.337159</td>
      <td>97.800000</td>
      <td>0.985685</td>
    </tr>
    <tr>
      <th>5</th>
      <td>4</td>
      <td>Arron Afflalo</td>
      <td>SG</td>
      <td>31</td>
      <td>SAC</td>
      <td>61</td>
      <td>45</td>
      <td>1580</td>
      <td>185</td>
      <td>420</td>
      <td>...</td>
      <td>125</td>
      <td>78</td>
      <td>21</td>
      <td>6</td>
      <td>42</td>
      <td>104</td>
      <td>515</td>
      <td>0.176202</td>
      <td>94.900000</td>
      <td>1.015806</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 33 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[28]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">lg_uper</span> <span class="o">=</span> <span class="n">player_stats</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Player&#39;</span><span class="p">)[</span><span class="s1">&#39;uPER&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="n">PER</span> <span class="o">=</span> <span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;uPER&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;Pace Factor&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">15</span> <span class="o">/</span> <span class="n">lg_uper</span>
<span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;PER&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PER</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[29]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">player_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;MP&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">1500</span><span class="p">]</span><span class="o">.</span>\
    <span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;PER&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span>\
    <span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[29]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Rk</th>
      <th>Player</th>
      <th>Pos</th>
      <th>Age</th>
      <th>Tm</th>
      <th>G</th>
      <th>GS</th>
      <th>MP</th>
      <th>FG</th>
      <th>FGA</th>
      <th>...</th>
      <th>AST</th>
      <th>STL</th>
      <th>BLK</th>
      <th>TOV</th>
      <th>PF</th>
      <th>PTS</th>
      <th>uPER</th>
      <th>Pace</th>
      <th>Pace Factor</th>
      <th>PER</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>558</th>
      <td>458</td>
      <td>Russell Westbrook</td>
      <td>PG</td>
      <td>28</td>
      <td>OKC</td>
      <td>81</td>
      <td>81</td>
      <td>2802</td>
      <td>824</td>
      <td>1941</td>
      <td>...</td>
      <td>840</td>
      <td>132</td>
      <td>31</td>
      <td>438</td>
      <td>190</td>
      <td>2558</td>
      <td>0.624007</td>
      <td>97.800000</td>
      <td>0.985685</td>
      <td>35.291034</td>
    </tr>
    <tr>
      <th>143</th>
      <td>119</td>
      <td>Kevin Durant</td>
      <td>SF</td>
      <td>28</td>
      <td>GSW</td>
      <td>62</td>
      <td>62</td>
      <td>2070</td>
      <td>551</td>
      <td>1026</td>
      <td>...</td>
      <td>300</td>
      <td>66</td>
      <td>99</td>
      <td>138</td>
      <td>117</td>
      <td>1555</td>
      <td>0.573128</td>
      <td>99.800000</td>
      <td>0.965932</td>
      <td>31.763987</td>
    </tr>
    <tr>
      <th>318</th>
      <td>261</td>
      <td>Kawhi Leonard</td>
      <td>SF</td>
      <td>25</td>
      <td>SAS</td>
      <td>74</td>
      <td>74</td>
      <td>2474</td>
      <td>636</td>
      <td>1312</td>
      <td>...</td>
      <td>260</td>
      <td>133</td>
      <td>55</td>
      <td>154</td>
      <td>122</td>
      <td>1888</td>
      <td>0.539479</td>
      <td>94.200000</td>
      <td>1.023355</td>
      <td>31.676535</td>
    </tr>
    <tr>
      <th>122</th>
      <td>100</td>
      <td>Anthony Davis</td>
      <td>C</td>
      <td>23</td>
      <td>NOP</td>
      <td>75</td>
      <td>75</td>
      <td>2708</td>
      <td>770</td>
      <td>1526</td>
      <td>...</td>
      <td>157</td>
      <td>94</td>
      <td>167</td>
      <td>181</td>
      <td>168</td>
      <td>2099</td>
      <td>0.559593</td>
      <td>98.000000</td>
      <td>0.983673</td>
      <td>31.583483</td>
    </tr>
    <tr>
      <th>210</th>
      <td>172</td>
      <td>James Harden</td>
      <td>PG</td>
      <td>27</td>
      <td>HOU</td>
      <td>81</td>
      <td>81</td>
      <td>2947</td>
      <td>674</td>
      <td>1533</td>
      <td>...</td>
      <td>907</td>
      <td>121</td>
      <td>38</td>
      <td>464</td>
      <td>215</td>
      <td>2356</td>
      <td>0.569261</td>
      <td>100.000000</td>
      <td>0.964000</td>
      <td>31.486576</td>
    </tr>
    <tr>
      <th>269</th>
      <td>220</td>
      <td>LeBron James</td>
      <td>SF</td>
      <td>32</td>
      <td>CLE</td>
      <td>74</td>
      <td>74</td>
      <td>2794</td>
      <td>736</td>
      <td>1344</td>
      <td>...</td>
      <td>646</td>
      <td>92</td>
      <td>44</td>
      <td>303</td>
      <td>134</td>
      <td>1954</td>
      <td>0.540118</td>
      <td>96.200000</td>
      <td>1.002079</td>
      <td>31.054715</td>
    </tr>
    <tr>
      <th>516</th>
      <td>424</td>
      <td>Isaiah Thomas</td>
      <td>PG</td>
      <td>27</td>
      <td>BOS</td>
      <td>76</td>
      <td>76</td>
      <td>2569</td>
      <td>682</td>
      <td>1473</td>
      <td>...</td>
      <td>448</td>
      <td>70</td>
      <td>13</td>
      <td>210</td>
      <td>167</td>
      <td>2199</td>
      <td>0.533925</td>
      <td>96.800000</td>
      <td>0.995868</td>
      <td>30.508345</td>
    </tr>
    <tr>
      <th>284</th>
      <td>233</td>
      <td>Nikola Jokic</td>
      <td>C</td>
      <td>21</td>
      <td>DEN</td>
      <td>73</td>
      <td>59</td>
      <td>2038</td>
      <td>494</td>
      <td>854</td>
      <td>...</td>
      <td>359</td>
      <td>61</td>
      <td>55</td>
      <td>171</td>
      <td>214</td>
      <td>1221</td>
      <td>0.539483</td>
      <td>98.300000</td>
      <td>0.980671</td>
      <td>30.355528</td>
    </tr>
    <tr>
      <th>426</th>
      <td>351</td>
      <td>Chris Paul</td>
      <td>PG</td>
      <td>31</td>
      <td>LAC</td>
      <td>61</td>
      <td>61</td>
      <td>1921</td>
      <td>374</td>
      <td>785</td>
      <td>...</td>
      <td>563</td>
      <td>119</td>
      <td>8</td>
      <td>147</td>
      <td>146</td>
      <td>1104</td>
      <td>0.523136</td>
      <td>96.100000</td>
      <td>1.003122</td>
      <td>30.109620</td>
    </tr>
    <tr>
      <th>19</th>
      <td>16</td>
      <td>Giannis Antetokounmpo</td>
      <td>SF</td>
      <td>22</td>
      <td>MIL</td>
      <td>80</td>
      <td>80</td>
      <td>2845</td>
      <td>656</td>
      <td>1259</td>
      <td>...</td>
      <td>434</td>
      <td>131</td>
      <td>151</td>
      <td>234</td>
      <td>246</td>
      <td>1832</td>
      <td>0.512369</td>
      <td>94.500000</td>
      <td>1.020106</td>
      <td>29.989176</td>
    </tr>
    <tr>
      <th>529</th>
      <td>433</td>
      <td>Karl-Anthony Towns</td>
      <td>C</td>
      <td>21</td>
      <td>MIN</td>
      <td>82</td>
      <td>82</td>
      <td>3030</td>
      <td>802</td>
      <td>1480</td>
      <td>...</td>
      <td>220</td>
      <td>56</td>
      <td>103</td>
      <td>212</td>
      <td>241</td>
      <td>2061</td>
      <td>0.511885</td>
      <td>94.600000</td>
      <td>1.019027</td>
      <td>29.929226</td>
    </tr>
    <tr>
      <th>111</th>
      <td>90</td>
      <td>DeMarcus Cousins</td>
      <td>C</td>
      <td>26</td>
      <td>SAC</td>
      <td>55</td>
      <td>55</td>
      <td>1891</td>
      <td>505</td>
      <td>1118</td>
      <td>...</td>
      <td>266</td>
      <td>75</td>
      <td>74</td>
      <td>207</td>
      <td>203</td>
      <td>1528</td>
      <td>0.510919</td>
      <td>95.621866</td>
      <td>1.008138</td>
      <td>29.553493</td>
    </tr>
    <tr>
      <th>79</th>
      <td>66</td>
      <td>Jimmy Butler</td>
      <td>SF</td>
      <td>27</td>
      <td>CHI</td>
      <td>76</td>
      <td>75</td>
      <td>2809</td>
      <td>570</td>
      <td>1252</td>
      <td>...</td>
      <td>417</td>
      <td>143</td>
      <td>32</td>
      <td>159</td>
      <td>112</td>
      <td>1816</td>
      <td>0.498912</td>
      <td>95.300000</td>
      <td>1.011542</td>
      <td>28.956400</td>
    </tr>
    <tr>
      <th>120</th>
      <td>98</td>
      <td>Stephen Curry</td>
      <td>PG</td>
      <td>28</td>
      <td>GSW</td>
      <td>79</td>
      <td>79</td>
      <td>2638</td>
      <td>675</td>
      <td>1443</td>
      <td>...</td>
      <td>524</td>
      <td>142</td>
      <td>17</td>
      <td>239</td>
      <td>183</td>
      <td>1999</td>
      <td>0.511188</td>
      <td>99.800000</td>
      <td>0.965932</td>
      <td>28.331143</td>
    </tr>
    <tr>
      <th>325</th>
      <td>266</td>
      <td>Damian Lillard</td>
      <td>PG</td>
      <td>26</td>
      <td>POR</td>
      <td>75</td>
      <td>75</td>
      <td>2694</td>
      <td>661</td>
      <td>1488</td>
      <td>...</td>
      <td>440</td>
      <td>68</td>
      <td>20</td>
      <td>197</td>
      <td>152</td>
      <td>2024</td>
      <td>0.483956</td>
      <td>96.700000</td>
      <td>0.996898</td>
      <td>27.681747</td>
    </tr>
    <tr>
      <th>130</th>
      <td>108</td>
      <td>DeMar DeRozan</td>
      <td>SG</td>
      <td>27</td>
      <td>TOR</td>
      <td>74</td>
      <td>74</td>
      <td>2620</td>
      <td>721</td>
      <td>1545</td>
      <td>...</td>
      <td>290</td>
      <td>78</td>
      <td>13</td>
      <td>180</td>
      <td>134</td>
      <td>2020</td>
      <td>0.473112</td>
      <td>94.700000</td>
      <td>1.017951</td>
      <td>27.632973</td>
    </tr>
    <tr>
      <th>296</th>
      <td>243</td>
      <td>Enes Kanter</td>
      <td>C</td>
      <td>24</td>
      <td>OKC</td>
      <td>72</td>
      <td>0</td>
      <td>1533</td>
      <td>402</td>
      <td>737</td>
      <td>...</td>
      <td>67</td>
      <td>32</td>
      <td>38</td>
      <td>123</td>
      <td>154</td>
      <td>1033</td>
      <td>0.483482</td>
      <td>97.800000</td>
      <td>0.985685</td>
      <td>27.343555</td>
    </tr>
    <tr>
      <th>189</th>
      <td>155</td>
      <td>Rudy Gobert</td>
      <td>C</td>
      <td>24</td>
      <td>UTA</td>
      <td>81</td>
      <td>81</td>
      <td>2744</td>
      <td>413</td>
      <td>625</td>
      <td>...</td>
      <td>97</td>
      <td>49</td>
      <td>214</td>
      <td>147</td>
      <td>246</td>
      <td>1137</td>
      <td>0.444079</td>
      <td>91.600000</td>
      <td>1.052402</td>
      <td>26.815053</td>
    </tr>
    <tr>
      <th>105</th>
      <td>87</td>
      <td>Mike Conley</td>
      <td>PG</td>
      <td>29</td>
      <td>MEM</td>
      <td>69</td>
      <td>68</td>
      <td>2292</td>
      <td>464</td>
      <td>1009</td>
      <td>...</td>
      <td>433</td>
      <td>92</td>
      <td>19</td>
      <td>156</td>
      <td>126</td>
      <td>1415</td>
      <td>0.446251</td>
      <td>92.300000</td>
      <td>1.044420</td>
      <td>26.741853</td>
    </tr>
    <tr>
      <th>550</th>
      <td>452</td>
      <td>John Wall</td>
      <td>PG</td>
      <td>26</td>
      <td>WAS</td>
      <td>78</td>
      <td>78</td>
      <td>2836</td>
      <td>647</td>
      <td>1435</td>
      <td>...</td>
      <td>831</td>
      <td>157</td>
      <td>49</td>
      <td>322</td>
      <td>151</td>
      <td>1805</td>
      <td>0.469346</td>
      <td>97.400000</td>
      <td>0.989733</td>
      <td>26.653123</td>
    </tr>
  </tbody>
</table>
<p>20 rows × 34 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Why-we-need-to-pace-adjust">Why we need to pace adjust<a class="anchor-link" href="#Why-we-need-to-pace-adjust">&#182;</a></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[30]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">PER</span> <span class="o">=</span> <span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;uPER&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">15</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;uPER&#39;</span><span class="p">])</span>
<span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;PER_nopace&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;uPER&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">15</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;uPER&#39;</span><span class="p">])</span>
<span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;PER_diff&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;PER_nopace&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;PER&#39;</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[31]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">player_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">player_stats</span><span class="p">[</span><span class="s1">&#39;MP&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">1500</span><span class="p">]</span><span class="o">.</span>\
    <span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;PER_diff&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span>\
    <span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[31]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Rk</th>
      <th>Player</th>
      <th>Pos</th>
      <th>Age</th>
      <th>Tm</th>
      <th>G</th>
      <th>GS</th>
      <th>MP</th>
      <th>FG</th>
      <th>FGA</th>
      <th>...</th>
      <th>BLK</th>
      <th>TOV</th>
      <th>PF</th>
      <th>PTS</th>
      <th>uPER</th>
      <th>Pace</th>
      <th>Pace Factor</th>
      <th>PER</th>
      <th>PER_nopace</th>
      <th>PER_diff</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>210</th>
      <td>172</td>
      <td>James Harden</td>
      <td>PG</td>
      <td>27</td>
      <td>HOU</td>
      <td>81</td>
      <td>81</td>
      <td>2947</td>
      <td>674</td>
      <td>1533</td>
      <td>...</td>
      <td>38</td>
      <td>464</td>
      <td>215</td>
      <td>2356</td>
      <td>0.569261</td>
      <td>100.0</td>
      <td>0.964000</td>
      <td>31.486576</td>
      <td>32.804962</td>
      <td>1.318385</td>
    </tr>
    <tr>
      <th>330</th>
      <td>271</td>
      <td>Brook Lopez</td>
      <td>C</td>
      <td>28</td>
      <td>BRK</td>
      <td>75</td>
      <td>75</td>
      <td>2222</td>
      <td>555</td>
      <td>1172</td>
      <td>...</td>
      <td>124</td>
      <td>184</td>
      <td>192</td>
      <td>1539</td>
      <td>0.429183</td>
      <td>101.3</td>
      <td>0.951629</td>
      <td>23.434021</td>
      <td>24.732633</td>
      <td>1.298612</td>
    </tr>
    <tr>
      <th>143</th>
      <td>119</td>
      <td>Kevin Durant</td>
      <td>SF</td>
      <td>28</td>
      <td>GSW</td>
      <td>62</td>
      <td>62</td>
      <td>2070</td>
      <td>551</td>
      <td>1026</td>
      <td>...</td>
      <td>99</td>
      <td>138</td>
      <td>117</td>
      <td>1555</td>
      <td>0.573128</td>
      <td>99.8</td>
      <td>0.965932</td>
      <td>31.763987</td>
      <td>33.027800</td>
      <td>1.263813</td>
    </tr>
    <tr>
      <th>120</th>
      <td>98</td>
      <td>Stephen Curry</td>
      <td>PG</td>
      <td>28</td>
      <td>GSW</td>
      <td>79</td>
      <td>79</td>
      <td>2638</td>
      <td>675</td>
      <td>1443</td>
      <td>...</td>
      <td>17</td>
      <td>239</td>
      <td>183</td>
      <td>1999</td>
      <td>0.511188</td>
      <td>99.8</td>
      <td>0.965932</td>
      <td>28.331143</td>
      <td>29.458371</td>
      <td>1.127228</td>
    </tr>
    <tr>
      <th>54</th>
      <td>49</td>
      <td>Eric Bledsoe</td>
      <td>PG</td>
      <td>27</td>
      <td>PHO</td>
      <td>66</td>
      <td>66</td>
      <td>2176</td>
      <td>449</td>
      <td>1034</td>
      <td>...</td>
      <td>31</td>
      <td>224</td>
      <td>164</td>
      <td>1390</td>
      <td>0.428196</td>
      <td>100.3</td>
      <td>0.961117</td>
      <td>23.613255</td>
      <td>24.675780</td>
      <td>1.062525</td>
    </tr>
    <tr>
      <th>86</th>
      <td>71</td>
      <td>Clint Capela</td>
      <td>C</td>
      <td>22</td>
      <td>HOU</td>
      <td>65</td>
      <td>59</td>
      <td>1551</td>
      <td>362</td>
      <td>563</td>
      <td>...</td>
      <td>79</td>
      <td>87</td>
      <td>179</td>
      <td>818</td>
      <td>0.446986</td>
      <td>100.0</td>
      <td>0.964000</td>
      <td>24.723373</td>
      <td>25.758574</td>
      <td>1.035201</td>
    </tr>
    <tr>
      <th>63</th>
      <td>54</td>
      <td>Trevor Booker</td>
      <td>PF</td>
      <td>29</td>
      <td>BRK</td>
      <td>71</td>
      <td>43</td>
      <td>1754</td>
      <td>305</td>
      <td>591</td>
      <td>...</td>
      <td>28</td>
      <td>127</td>
      <td>152</td>
      <td>709</td>
      <td>0.330148</td>
      <td>101.3</td>
      <td>0.951629</td>
      <td>18.026565</td>
      <td>19.025519</td>
      <td>0.998954</td>
    </tr>
    <tr>
      <th>244</th>
      <td>200</td>
      <td>Rondae Hollis-Jefferson</td>
      <td>SF</td>
      <td>22</td>
      <td>BRK</td>
      <td>78</td>
      <td>50</td>
      <td>1761</td>
      <td>235</td>
      <td>542</td>
      <td>...</td>
      <td>44</td>
      <td>116</td>
      <td>177</td>
      <td>675</td>
      <td>0.288183</td>
      <td>101.3</td>
      <td>0.951629</td>
      <td>15.735204</td>
      <td>16.607181</td>
      <td>0.871977</td>
    </tr>
    <tr>
      <th>299</th>
      <td>246</td>
      <td>Sean Kilpatrick</td>
      <td>SG</td>
      <td>27</td>
      <td>BRK</td>
      <td>70</td>
      <td>24</td>
      <td>1754</td>
      <td>305</td>
      <td>735</td>
      <td>...</td>
      <td>6</td>
      <td>135</td>
      <td>118</td>
      <td>919</td>
      <td>0.275043</td>
      <td>101.3</td>
      <td>0.951629</td>
      <td>15.017741</td>
      <td>15.849959</td>
      <td>0.832218</td>
    </tr>
    <tr>
      <th>552</th>
      <td>454</td>
      <td>T.J. Warren</td>
      <td>SF</td>
      <td>23</td>
      <td>PHO</td>
      <td>66</td>
      <td>59</td>
      <td>2048</td>
      <td>403</td>
      <td>814</td>
      <td>...</td>
      <td>39</td>
      <td>57</td>
      <td>175</td>
      <td>951</td>
      <td>0.326203</td>
      <td>100.3</td>
      <td>0.961117</td>
      <td>17.988730</td>
      <td>18.798168</td>
      <td>0.809438</td>
    </tr>
    <tr>
      <th>521</th>
      <td>427</td>
      <td>Klay Thompson</td>
      <td>SG</td>
      <td>26</td>
      <td>GSW</td>
      <td>78</td>
      <td>78</td>
      <td>2649</td>
      <td>644</td>
      <td>1376</td>
      <td>...</td>
      <td>40</td>
      <td>128</td>
      <td>139</td>
      <td>1742</td>
      <td>0.361555</td>
      <td>99.8</td>
      <td>0.965932</td>
      <td>20.038132</td>
      <td>20.835401</td>
      <td>0.797269</td>
    </tr>
    <tr>
      <th>317</th>
      <td>260</td>
      <td>Alex Len</td>
      <td>C</td>
      <td>23</td>
      <td>PHO</td>
      <td>77</td>
      <td>34</td>
      <td>1560</td>
      <td>230</td>
      <td>463</td>
      <td>...</td>
      <td>98</td>
      <td>102</td>
      <td>242</td>
      <td>613</td>
      <td>0.314589</td>
      <td>100.3</td>
      <td>0.961117</td>
      <td>17.348256</td>
      <td>18.128874</td>
      <td>0.780619</td>
    </tr>
    <tr>
      <th>202</th>
      <td>164</td>
      <td>Draymond Green</td>
      <td>PF</td>
      <td>26</td>
      <td>GSW</td>
      <td>76</td>
      <td>76</td>
      <td>2471</td>
      <td>272</td>
      <td>650</td>
      <td>...</td>
      <td>106</td>
      <td>184</td>
      <td>217</td>
      <td>776</td>
      <td>0.342795</td>
      <td>99.8</td>
      <td>0.965932</td>
      <td>18.998435</td>
      <td>19.754338</td>
      <td>0.755902</td>
    </tr>
    <tr>
      <th>62</th>
      <td>53</td>
      <td>Devin Booker</td>
      <td>SG</td>
      <td>20</td>
      <td>PHO</td>
      <td>78</td>
      <td>78</td>
      <td>2730</td>
      <td>606</td>
      <td>1431</td>
      <td>...</td>
      <td>21</td>
      <td>241</td>
      <td>242</td>
      <td>1726</td>
      <td>0.303953</td>
      <td>100.3</td>
      <td>0.961117</td>
      <td>16.761730</td>
      <td>17.515957</td>
      <td>0.754227</td>
    </tr>
    <tr>
      <th>284</th>
      <td>233</td>
      <td>Nikola Jokic</td>
      <td>C</td>
      <td>21</td>
      <td>DEN</td>
      <td>73</td>
      <td>59</td>
      <td>2038</td>
      <td>494</td>
      <td>854</td>
      <td>...</td>
      <td>55</td>
      <td>171</td>
      <td>214</td>
      <td>1221</td>
      <td>0.539483</td>
      <td>98.3</td>
      <td>0.980671</td>
      <td>30.355528</td>
      <td>31.088904</td>
      <td>0.733375</td>
    </tr>
    <tr>
      <th>558</th>
      <td>458</td>
      <td>Russell Westbrook</td>
      <td>PG</td>
      <td>28</td>
      <td>OKC</td>
      <td>81</td>
      <td>81</td>
      <td>2802</td>
      <td>824</td>
      <td>1941</td>
      <td>...</td>
      <td>31</td>
      <td>438</td>
      <td>190</td>
      <td>2558</td>
      <td>0.624007</td>
      <td>97.8</td>
      <td>0.985685</td>
      <td>35.291034</td>
      <td>35.959805</td>
      <td>0.668771</td>
    </tr>
    <tr>
      <th>122</th>
      <td>100</td>
      <td>Anthony Davis</td>
      <td>C</td>
      <td>23</td>
      <td>NOP</td>
      <td>75</td>
      <td>75</td>
      <td>2708</td>
      <td>770</td>
      <td>1526</td>
      <td>...</td>
      <td>167</td>
      <td>181</td>
      <td>168</td>
      <td>2099</td>
      <td>0.559593</td>
      <td>98.0</td>
      <td>0.983673</td>
      <td>31.583483</td>
      <td>32.247807</td>
      <td>0.664324</td>
    </tr>
    <tr>
      <th>257</th>
      <td>211</td>
      <td>Andre Iguodala</td>
      <td>SF</td>
      <td>33</td>
      <td>GSW</td>
      <td>76</td>
      <td>0</td>
      <td>1998</td>
      <td>219</td>
      <td>415</td>
      <td>...</td>
      <td>39</td>
      <td>58</td>
      <td>97</td>
      <td>574</td>
      <td>0.298232</td>
      <td>99.8</td>
      <td>0.965932</td>
      <td>16.528635</td>
      <td>17.186270</td>
      <td>0.657635</td>
    </tr>
    <tr>
      <th>18</th>
      <td>15</td>
      <td>Ryan Anderson</td>
      <td>PF</td>
      <td>28</td>
      <td>HOU</td>
      <td>72</td>
      <td>72</td>
      <td>2116</td>
      <td>323</td>
      <td>773</td>
      <td>...</td>
      <td>14</td>
      <td>55</td>
      <td>142</td>
      <td>979</td>
      <td>0.280769</td>
      <td>100.0</td>
      <td>0.964000</td>
      <td>15.529710</td>
      <td>16.179960</td>
      <td>0.650250</td>
    </tr>
    <tr>
      <th>97</th>
      <td>79</td>
      <td>Marquese Chriss</td>
      <td>PF</td>
      <td>19</td>
      <td>PHO</td>
      <td>82</td>
      <td>75</td>
      <td>1743</td>
      <td>284</td>
      <td>632</td>
      <td>...</td>
      <td>70</td>
      <td>108</td>
      <td>263</td>
      <td>753</td>
      <td>0.258119</td>
      <td>100.3</td>
      <td>0.961117</td>
      <td>14.234177</td>
      <td>14.874672</td>
      <td>0.640495</td>
    </tr>
  </tbody>
</table>
<p>20 rows × 36 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
        </div>
      </div>
    </body>
  
 


</html>
